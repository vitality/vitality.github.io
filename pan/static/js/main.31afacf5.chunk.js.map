{"version":3,"sources":["img/lg-fg.svg","img/logo.png","img/zip.svg","img/audio.svg","store/http.js","hooks/ext.js","hooks/index.js","store/action.js","components/header/container.js","components/modal/modal.js","components/header/header.js","components/menu/menu.js","components/bread/bread.js","components/item/ItemIcon.js","components/item/file.js","views/index/main.js","views/index/IndexPage.js","views/content/code.js","views/content/CodePage.js","views/media/video.js","views/media/MediaPage.js","views/content/md.js","views/content/MarkdownPage.js","views/404/404.js","views/404/Page404.js","App.js","store/index.js","index.js"],"names":["module","exports","http","axios","create","baseURL","extData","images","video","audio","code","md","doc","getFileExt","name","slice","lastIndexOf","getFileType","ext","key","includes","getPasswordFiles","id","data","length","pwdFiles","pid","forEach","item","push","useGetFiles","d","useGetQuery","useGetCurrent","useSelector","state","filter","useGetMenu","folders","folder","openData","setOpenMenu","menuData","title","children","parseMenu","next","find","useGetParents","ret","parseParents","parent","search","useHistory","location","qs","parse","sid","endsWith","useShowMessage","msg","success","message","error","useSetModal","dispatch","useDispatch","modal","modalType","option","setModal","type","range","useGetContent","console","log","get","params","then","status","parseResponse","showMessage","confirmLoading","visible","getCheckedIds","checked","useDeleteItem","resolve","reject","postData","post","upload","file","url","progress","a","start","filesize","size","chunk","Math","floor","end","min","config","headers","onUploadProgress","loaded","percent","round","toFixed","put","res","update","useCurrent","history","Container","props","className","Dragger","Upload","DirectoryTree","Tree","ShowModal","footer","moveData","InputRef","handleOk","handleCancel","getUploadScript","customUpload","reader","FileReader","readAsArrayBuffer","onloadend","result","target","useCustomUpload","current","parents","setMoveData","useSetMoveData","uploadUrl","options","multiple","beforeUpload","customRequest","action","filename","onError","onProgress","onSuccess","withCredentials","onExpand","keys","node","onOk","onCancel","destroyOnClose","maskClosable","style","padding","Item","fontWeight","color","HomeOutlined","onClick","reverse","map","cursor","FolderOpenOutlined","paddingRight","marginRight","ref","InboxOutlined","expandedKeys","onSelect","treeData","Header","Layout","confirm","Modal","HeaderNav","deleteItem","moveItem","useMoveItem","createFolder","useCreateFolder","showModalUpload","width","useShowModalUpload","showModalCreate","okText","cancelText","useShowModalCreate","showModalMove","useShowModalMove","hideModal","useHideModal","checkChecked","check","some","useCheckChecked","useRef","theme","position","zIndex","span","src","logo","alt","icon","ExclamationCircleOutlined","okType","Promise","handleDelete","catch","value","Sider","SiderMenu","selectedKeys","BreadMenu","checkAll","val","useCheckAll","files","f","mid","menuName","fid","fileName","unshift","every","e","stopPropagation","onChange","FileOutlined","ItemIcon","thumbnail","filetype","thumb","fileIcon","zip","ffg","background","File","loading","download","window","open","useDownloadFile","setFile","fileType","useSetFile","checkFile","useCheckFile","show","downloadRef","deleteRef","onMouseEnter","del","display","onMouseLeave","danger","DeleteOutlined","DownloadOutlined","Main","inputRef","passwords","JSON","sessionStorage","getItem","password","pop","usePassword","checkPassword","pwd","setItem","stringify","useCheckPassword","submit","focus","Password","allowClear","placeholder","grid","gutter","xs","sm","lg","xl","xxl","dataSource","renderItem","Content","IndexPage","Code","content","getContent","useEffect","language","html","Prism","highlight","languages","dangerouslySetInnerHTML","__html","CodePage","Video","controls","autoPlay","MediaPage","renderer","marked","Renderer","validLanguage","hljs","getLanguage","pedantic","gfm","breaks","sanitize","smartLists","smartypants","xhtml","setOptions","Markdown","MarkdownPage","NotFound","App","getMessage","useGetMessage","path","exact","render","Page404","store","createStore","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.31afacf5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/lg-fg.694100c9.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIMAAAAjCAMAAACAX0m6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlCQTIwRTcxQ0VDMjExRThCQTc3OTAyMzUwN0ZFODQ5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjlCQTIwRTcyQ0VDMjExRThCQTc3OTAyMzUwN0ZFODQ5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUJBMjBFNkZDRUMyMTFFOEJBNzc5MDIzNTA3RkU4NDkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OUJBMjBFNzBDRUMyMTFFOEJBNzc5MDIzNTA3RkU4NDkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6+tUZ8AAADAFBMVEWk1O1Pqto3nNNesd2by+VWrdz+/v/8/f7O5/U6oNee0OydzuhKqNrg8PnK5fSCw+S73vGZyeO23PBtuODm8fc9odd5utxuuODp9Ppqt+Bjs95gst3V6/aHxebF4/PA4PK83vGx2e9Fpdg5ntSlzuSYzuo1nNRWrduAwuX3+/3m8/rl8vpbsN7D4vNJp9qv2O5ApNiz1+lGodNAoten0umhzeaezeWYzeqcy+WKxuZ5vuNktN80nNM1m9KbzejN5vNcsN38/v5TrNtSq9vy+fxQqtpPqdpdrtmCweJUrNzq9fvz+fxUrNvf8Pja7PZEotRhs95OqdpQqNdbsN2Px+VOqdlgst5asN202u5Rqtpott/m8/lZr91Rq9rB4PFRq9uo1OtVrdxar91fst5Xrtx2u99Xrt1SrNtest5Zr9xYrt1Sq9pYrtxTq9tntt9Yr91UrdtVrds2ndVesd6azuqXzenw+PxNqdlQq9tVrNtntd9Qq9r7/f7i8flVrNxcsd1br91Wrtzv9/xcsd5Yr9xQqttdsd76/P42ndRRqtuZzur1+v1MqdlRrNxZrtzZ7fdhst5ZsN1UrNr9/v9Sqtrj8fldsd3l8vmIweDd7/iaz+vs9vuz2u/Y7Pe63O/Y7fi11+hbsd5CpNfa6/Ncq9ZwueFoteCo0eeMyOjS5vFntuBRq9yp0eit1+6m0Odhs99Trdvx+f0znNPq8/nr8/dfst2ZzepdsuDu9/tUrdz4+/xVrN3z+f2Xx+Fnsto3ndVAo9iNxOGy1ObA4fN/weTc7vceks7j8/tcsNxdsN2j0uxGptik0uzR6PXX6fLZ6/XG5PM+otiMx+dMqdq12+/5/P76/P1cr9tNqdiPyeh9veB/u9yp0OZtueKAweT6/f44n9Zarty43fB5vODb7vd7vuFbqdRptuCcz+vx+PyYxuC+3/J1vOJFpthEpNdGptrP6PUkldErl9CSyueWy+dNqNn3+vs4ndVfrNbI4u/L4++o0OZptNw4nNH///////+snx9iAAABAHRSTlP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8AU/cHJQAABdtJREFUeNrElnd8k0UYx1NqypAloAwBWVJApoIKyJs04c2b8L7mJcskJE0zOyltKZROpkDZZYOAiooTt+JWFPdGcaDiVtx7e0d87u5NSJsUP/7R+Pt8end93+Seb373PHenirZUTtdOU6Y+1/TN6jEjo+mRqiXBrcfDs0FhtVQaenHN/8HQ/1ix12nTam22xUXhitKmrulnGJTvdWpXVBaGQoWV22zrsyX3uHQzDFR7nctWFF5GFcrUBsOS+0h6GfpIxU5bZYghNIVCmYuC2Tr+03QyrLSpy2zEhZlMoXszbetr9H3T6sOY3QMWVSYwECNgNV5NH8OoPUtHrpnx9TFtJSMoLMzctjcYfqBk39astDBsOHDcFAgXXX/joQ3P573w7cabvUOGDPnumoMZ2oU6N9/v5/6tfF3UiLTX+MzNX2j85lMH1mjMzRi+PFq6UB2+vGjxLX17DBzV9eMjU5c3DR40qHv3Hj1fD+hK3BkWR7c+qWfCstIbW74wnpqBO/kBwvDU2RIhCC4efbjTCarHfzzKBrc1LrmjVM9nGBybXkrNYFR6jvYeDciV8IAIgxBCpFOemBGSsZHjIggxhu0VJjUQ2LSj945XGPY/rWKDC4cGykv1eTyf4XDsScHgx64Yg+ihPUiAEAK2QlizwoCY4gwaLCCBPJGtjCHTpC4KOrWgZeOvYKH//OkQG1w8tFySCvR5bnCi5OGWBGYIZbQjM7IDgyCI1BeNgICEMGCsaS0Z4A2ycmJU8WG1Tj3ba9M2Y7hWvirGEKjR6fTgRIZhweTkqajM2AoMHEZsCei8iWuRmoGTrTGGpblS2EtdAB1UGO559Bk2OO33hxZKBCKXNzjWNiRNJqAowlH48SQ2/KVg4DhOo8gHY5KNzcWpBpcEYjZotRfMY6F/m3SnwvCYyWQiENSIeUkMkJICMYGENMt+hcHOcUaMIKBdycgEAR7HIUjICLznrFYgVHUrCRTHbIgztO+VpTDMZQwF1Ih9SQkBIXGEwxqSk2ZPbC1QLCBiPhAkI8dEv4ew6MPIF1XWop++JUNOPQ1fvznGABCM4dnkstD4sN+KSWzfyXww00wBE+LbkFHZR5jsYJ/HCPCIUqqygSHI1sJmO7yamHDTg9C++XJ9AoOOMmxqyQBTC9jjc5HYRlKmsXwAJwRZTPBLNkc9fuU/Dy2hqEeEEiWlrfqopDysXJ2czjPPJQ5cfTc0vZ6Ir4VJpzBkJ+WDy8oK0IX8shyrFBR14Qi2J1SGgMF3GccgUGJGAkPvLTp1/kYnUdDb8SISeNIr0Pz1SGI+sMKYmVxlEWK6SC3hKAOCPPPIso8Y44/bxd5hc2yfpgkCCUnfqOa79eXqfG8wGPR6yzrOJ4F3XAnNhB2UodEkScQGukt1S/YBI5cMzopGTP0la+GyC9gPA4+MEfHIE8ERJbRVVAZsl0KshFU/8Ft0Fer8MiAoK2YMZ/0CzRnvMAaKUMBqs3tyTsqeqFmMaqwMgc4pCphN7qNOu9hpAQcEy9MUDNFMt14HToDCSz48QBk+I80n9Ly4RMcQ3LAUNW8knX2wzqLPDkkREROyHnjo5Bo7zUcqOB6Mdow9LBtgkxeQLENH9qhoBwtASBUVAdBcUhcn3n0Lms9HUB/u0tGtOhdsWHtO0lLYIa3hZzPP4/KJ5NfHMxK2yfjnSULYUXO54Myab+H1pTpJkmqksbdPfO+GYdd9f/qEr86/b+Lf+4f90VmvZwiWtye3do/xe1KcCJzrP92jXjPwuasgVEHBkrHD27Wb1nld47TGdZ1hOHysWp8HBICw4P22vcv5DQaer6tzr8rLrVueUc1DzGq3u656eXUu7+Z5env4oq3vk/2ftDgsBiJLTIYMgyH2xPHrlA5puFdv3z2gd+0s0Jza2jmgWXHV9hwxrks67tVwe6/aemlqNdy/OZrV5gxZVQ07u5zXZ0YrGtVlZ8PSnLZlyJm+q2r6qVW1a3r7NmWoX5nz71r5QZsx/CPAACyhDtnCVHemAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/zip.2eafb726.svg\";","module.exports = __webpack_public_path__ + \"static/media/audio.55f1a02d.svg\";","import axios from \"axios\";\r\n\r\nconst http = axios.create({\r\n  baseURL: \" https://pan.9dutv.com/api/disc\"\r\n  // baseURL: \" http://localhost:8080/api/disc\",\r\n});\r\n\r\nexport default http;","const extData = {\r\n  images: [\r\n    'bmp', 'jpg', 'jpeg', 'png', 'gif'\r\n  ],\r\n  video: [\r\n    'mp4', 'webm', 'mkv', 'avi', 'flv',\r\n    'mpeg', 'mpg', 'rm', 'rmvb', 'mov', 'wmv',\r\n  ],\r\n  audio: [\r\n    'ogg', 'mp3', 'wav'\r\n  ],\r\n  code: [\r\n    'txt', 'html', 'htm', 'php', 'css', 'go', 'java',\r\n    'js', 'javascript', 'json', 'txt', 'sh', 'ts'\r\n  ],\r\n  md: [\r\n    'md', 'markdown'\r\n  ],\r\n  doc: [\r\n    'csv', 'doc', 'docx', 'odp', 'ods',\r\n    'odt', 'pot', 'potm', 'potx', 'pps',\r\n    'ppsx', 'ppsxm', 'ppt', 'pptm', 'pptx',\r\n    'rtf', 'xls', 'xlsx',\r\n    'pdf', 'rar', 'zip'\r\n  ]\r\n};\r\n\r\nconst getFileExt = name => {\r\n  return name ? name.slice(name.lastIndexOf('.') + 1) : 'javascript';\r\n}\r\n\r\nconst getFileType = name => {\r\n  const ext = getFileExt(name);\r\n  for (let key in extData) {\r\n    if (extData[key].includes(ext)) return key;\r\n  }\r\n  return 'doc';\r\n}\r\n\r\nexport {\r\n  getFileExt,\r\n  getFileType\r\n};","import {useDispatch, useSelector} from \"react-redux\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport qs from \"qs\";\r\nimport {message} from \"antd\";\r\n\r\nconst usePassword = () => {\r\n  const {data} = useSelector(state => state);\r\n  const {d} = useGetQuery();\r\n  const {id = 'root'} = useGetCurrent(d);\r\n  const pwdFiles = getPasswordFiles(id, data);\r\n  const passwords = JSON.parse(sessionStorage.getItem('panPwd')) || [];\r\n  if (!pwdFiles.length) return {password: false};\r\n  const file = passwords.length ? pwdFiles.reverse().find(item => !passwords.includes(item.id)) : pwdFiles.pop();\r\n  if(file) {\r\n    const parent = file.pid==='root' ? {name: '根目录'} : data.find(item => item.id === file.pid);\r\n    console.log(parent);\r\n    return {file, parent, password: true};\r\n  }\r\n  return {password: false};\r\n}\r\n\r\nconst getPasswordFiles = (id, data) => {\r\n  if (!data.length) return [];\r\n  const pwdFiles = [];\r\n  let pid = '';\r\n  data.forEach(item => {\r\n    if (item.id === id) pid = item.pid;\r\n    if (item.pid === id && item.name === '.password') {\r\n      pwdFiles.push(item);\r\n    }\r\n  })\r\n  if (pid)  pwdFiles.push(...getPasswordFiles(pid, data));\r\n  return pwdFiles;\r\n}\r\n\r\nconst useGetFiles = () => {\r\n  const {d} = useGetQuery();\r\n  const {id = 'root'} = useGetCurrent(d);\r\n  const {data} = useSelector(state => state);\r\n  if (!data.length) return [];\r\n  return data.filter(item => item.pid === id && item.name !== '.password');\r\n}\r\n\r\nconst useGetMenu = () => {\r\n  const {d} = useGetQuery();\r\n  const {data} = useSelector(state => state);\r\n  const {id = 'root'} = useGetCurrent(d);\r\n  if (!data.length) return [];\r\n  const folders = data.filter(item => item.folder);\r\n  const openData = ['root'];\r\n  setOpenMenu(id, folders, openData);\r\n  const children = parseMenu(folders, 'root');\r\n  return {\r\n    openData, menuData: [{\r\n      title: '根目录',\r\n      key: 'root',\r\n      children\r\n    }]\r\n  };\r\n}\r\n\r\nconst useSetMoveData = () => {\r\n  const {data} = useSelector(state => state);\r\n  const dispatch = useDispatch();\r\n  return (id = 'root') => {\r\n    const folders = data.filter(item => item.folder);\r\n    const openData = ['root'];\r\n    setOpenMenu(id, folders, openData);\r\n    dispatch({\r\n      type: 'MOVE_DATA',\r\n      data: {id, openData}\r\n    })\r\n  }\r\n}\r\n\r\nconst parseMenu = (folders, id) => {\r\n  const children = [];\r\n  const data = folders.filter(item => item.pid === id);\r\n  data.forEach(item => {\r\n    children.push({\r\n      title: item.name,\r\n      key: item.id,\r\n      children: parseMenu(folders, item.id)\r\n    })\r\n  })\r\n  return children;\r\n}\r\n\r\nconst setOpenMenu = (id, data, openData) => {\r\n  if (id === 'root') return;\r\n  openData.push(id);\r\n  const next = data.find(item => item.id === id);\r\n  if (next) setOpenMenu(next.pid, data, openData);\r\n}\r\n\r\nconst useGetParents = () => {\r\n  const {d} = useGetQuery();\r\n  const {data} = useSelector(state => state);\r\n  let {pid = 'root'} = useGetCurrent(d);\r\n  let ret = [];\r\n  parseParents(pid, data, ret);\r\n\r\n  return ret;\r\n}\r\n\r\nconst parseParents = (pid, data, ret) => {\r\n  const parent = data.find(item => item.folder && item.id === pid);\r\n  if (parent) {\r\n    const {id, name, pid} = parent;\r\n    ret.push({id, name});\r\n    parseParents(pid, data, ret);\r\n  }\r\n}\r\n\r\nconst useGetQuery = () => {\r\n  const {location: {search}} = useHistory();\r\n  return search ? qs.parse(search.slice(1)) : {};\r\n}\r\n\r\nconst useGetCurrent = (sid) => {\r\n  const {data} = useSelector(state => state);\r\n  if (!sid || !data.length) return {};\r\n  return data.find(item => item.id.endsWith(sid));\r\n}\r\n\r\nconst useShowMessage = () => {\r\n  return (msg, success = true) => {\r\n    success ? message.success(msg) : message.error(msg);\r\n  }\r\n}\r\n\r\nconst useCheckChecked = () => {\r\n  const data = useSelector(state => state.data);\r\n  const showMessage = useShowMessage();\r\n  const {d} = useGetQuery();\r\n  const {id = 'root'} = useGetCurrent(d);\r\n  const check = data.some(item => item.pid === id && item.checked);\r\n  return () => {\r\n    if (!check) {\r\n      showMessage('请至少选择一个文件或文件夹', false);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n}\r\n\r\nconst useShowModalCreate = () => {\r\n  const dispatch = useDispatch();\r\n  return () => {\r\n    const modal = {\r\n      title: '新建文件夹',\r\n      visible: true,\r\n      width: '40%',\r\n      okText: '提交',\r\n      cancelText: '取消'\r\n    };\r\n    setModal(dispatch, modal, 'create');\r\n  }\r\n}\r\n\r\nconst useShowModalMove = () => {\r\n  const dispatch = useDispatch();\r\n  return () => {\r\n    const modal = {\r\n      title: '移动到',\r\n      visible: true,\r\n      width: '60%',\r\n      okText: '提交',\r\n      cancelText: '取消'\r\n    };\r\n    setModal(dispatch, modal, 'move');\r\n  }\r\n}\r\n\r\nconst useShowModalUpload = () => {\r\n  const dispatch = useDispatch();\r\n  return () => {\r\n    const modal = {\r\n      footer: null,\r\n      title: '文件上传',\r\n      visible: true,\r\n      width: '60%'\r\n    };\r\n    setModal(dispatch, modal, 'upload');\r\n  }\r\n}\r\n\r\nconst useHideModal = () => {\r\n  const dispatch = useDispatch();\r\n  const modal = useSelector(state => state.modal);\r\n  return () => {\r\n    setModal(dispatch, {...modal, visible: false});\r\n  }\r\n}\r\n\r\nconst useSetModal = () => {\r\n  const dispatch = useDispatch();\r\n  const {modal, modalType} = useSelector(state => state);\r\n  return (option) => {\r\n    setModal(dispatch, {...modal, ...option}, modalType);\r\n  }\r\n}\r\n\r\nconst setModal = (dispatch, modal, modalType = '') => {\r\n  dispatch({\r\n    type: 'SET_MODAL',\r\n    modal,\r\n    modalType\r\n  });\r\n\r\n}\r\n\r\nexport {\r\n  useGetFiles,\r\n  usePassword,\r\n  useGetMenu,\r\n  useGetParents,\r\n  useGetQuery,\r\n  useGetCurrent,\r\n  useShowMessage,\r\n  useShowModalCreate,\r\n  useShowModalUpload,\r\n  useShowModalMove,\r\n  useSetModal,\r\n  useHideModal,\r\n  useSetMoveData,\r\n  useCheckChecked\r\n}\r\n","import {useDispatch, useSelector} from \"react-redux\";\r\nimport http from \"./http\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport {getFileType} from \"../hooks/ext\";\r\nimport {useGetCurrent, useGetQuery, useSetModal, useShowMessage} from \"../hooks\";\r\n\r\n//上传文件片段大小\r\nconst range = 10485760;\r\n\r\nconst useGetMessage = () => {\r\n  const dispatch = useDispatch();\r\n  return () => {\r\n    dispatch({\r\n      type: 'LOADING'\r\n    });\r\n    http.get('')\r\n        .then(({data}) => {\r\n          data.forEach(item => item.checked = false);\r\n          dispatch({\r\n            type: 'COMPLETE',\r\n            data\r\n          })\r\n        });\r\n  }\r\n}\r\n\r\nconst useGetContent = () => {\r\n  const dispatch = useDispatch();\r\n  return (id, pid) => {\r\n    console.log(id, pid)\r\n    dispatch({\r\n      type: 'LOADING',\r\n    });\r\n    http.get('/content', {params: {id, pid}})\r\n        .then(({data: {data}, status}) => {\r\n          if (status === 200) {\r\n            dispatch({\r\n              type: 'CONTENT',\r\n              data\r\n            })\r\n          }\r\n        });\r\n  }\r\n}\r\n\r\nconst useMoveItem = () => {\r\n  const showMessage = useShowMessage();\r\n  const dispatch = useDispatch();\r\n  const setModal = useSetModal();\r\n  const {data, moveData: {id}} = useSelector(state => state);\r\n  const checked = getCheckedIds(data);\r\n  return async () => {\r\n    setModal({confirmLoading: true});\r\n    const {data, status} = await http.post('/move', {id, data: checked});\r\n    await update(id, dispatch);\r\n    parseResponse(data, status, setModal, showMessage);\r\n  }\r\n}\r\n\r\nconst useCreateFolder = () => {\r\n  const showMessage = useShowMessage();\r\n  const dispatch = useDispatch();\r\n  const setModal = useSetModal();\r\n  const {d} = useGetQuery();\r\n  const {id = 'root'} = useGetCurrent(d);\r\n  return async (name) => {\r\n    setModal({confirmLoading: true});\r\n    const {data, status} = await http.post('/create', {id, name})\r\n    await update(id, dispatch);\r\n    parseResponse(data, status, setModal, showMessage);\r\n  }\r\n}\r\n\r\nconst parseResponse = (data, status, setModal, showMessage) => {\r\n  let success = false;\r\n  if (status === 200 || status === 201) {\r\n    success = true;\r\n    setModal({confirmLoading: false, visible: false})\r\n  } else {\r\n    setModal({confirmLoading: false})\r\n  }\r\n  showMessage(data, success);\r\n}\r\n\r\nconst getCheckedIds = data => {\r\n  const ret = [];\r\n  data.forEach(({id, pid, checked, name}) => {\r\n    if (checked) ret.push({id, pid, name});\r\n  });\r\n  return ret;\r\n}\r\n\r\nconst useDeleteItem = () => {\r\n  const showMessage = useShowMessage();\r\n  const dispatch = useDispatch();\r\n  const data = useSelector(state => state.data);\r\n  return (resolve, reject, id = '') => {\r\n    const postData = [];\r\n    if (id) {\r\n      const {pid} = data.find(item => item.id === id);\r\n      postData.push({id, pid});\r\n    } else {\r\n      postData.push(...getCheckedIds(data))\r\n    }\r\n    http.post('/delete', {data: postData})\r\n        .then(({data, status}) => {\r\n          resolve();\r\n          let success = false;\r\n          let msg = data;\r\n          if (status === 200) {\r\n            dispatch({\r\n              type: 'COMPLETE',\r\n              data: data.data\r\n            })\r\n            success = true;\r\n            msg = data.msg;\r\n          }\r\n          showMessage(msg, success);\r\n        });\r\n  }\r\n}\r\n\r\nconst useGetUploadScript = () => {\r\n  return async (id, file) => {\r\n    const {size, name} = file;\r\n    return await http.post('/upload', {id, size, name});\r\n  }\r\n}\r\n\r\nconst useCustomUpload = () => {\r\n  const dispatch = useDispatch();\r\n  const reader = new FileReader();\r\n  const {d} = useGetQuery();\r\n  const {id = 'root', name} = useGetCurrent(d);\r\n  return (url, file, progress, success) => {\r\n    reader.readAsArrayBuffer(file);\r\n    reader.onloadend = async ({target: {result}}) => {\r\n      const res = await upload(file, result, url, progress);\r\n      await update(id, dispatch);\r\n      success(res, file);\r\n    }\r\n  }\r\n}\r\n\r\nconst upload = async (file, data, url, progress, start = 0) => {\r\n  const filesize = file.size;\r\n  if (start >= filesize) return;\r\n  const chunk = Math.floor(start / range);\r\n  const end = Math.min(start + range, filesize);\r\n  const config = {\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Content-Range': `bytes ${start}-${end - 1}/${filesize}`\r\n    },\r\n    onUploadProgress: ({loaded}) => {\r\n      loaded += range * chunk;\r\n      progress({percent: Math.round((loaded / filesize) * 100).toFixed(2)}, file);\r\n    }\r\n  };\r\n  let res = await http.put(url, data.slice(start, end), config);\r\n  if (res.status === 202) {\r\n    res = await upload(file, data, url, progress, end);\r\n  }\r\n  return res;\r\n}\r\n\r\nconst update = async (id, dispatch) => {\r\n  const {data} = await http.post('/update', {id});\r\n  dispatch({\r\n    type: 'COMPLETE',\r\n    data\r\n  })\r\n}\r\n\r\nconst useSetFile = () => {\r\n  const data = useSelector(state => state.data);\r\n  const history = useHistory();\r\n  const {d} = useGetQuery();\r\n  return (id) => {\r\n    const file = data.find(item => item.id === id);\r\n    let fileType = getFileType(file.name);\r\n    const url = `/${fileType}` + (d ? '?d=' + d + '&f=' : '?f=') + id.slice(-8);\r\n    history.push(url);\r\n  }\r\n}\r\n\r\nconst useDownloadFile = () => {\r\n  const showMessage = useShowMessage();\r\n  const dispatch = useDispatch();\r\n  return id => {\r\n    dispatch({type: 'LOADING'});\r\n    http.post('/download', {id})\r\n        .then(({data, status}) => {\r\n          dispatch({type: 'LOADED'});\r\n          if (status === 200) {\r\n            window.open(data);\r\n          } else {\r\n            showMessage(data, false);\r\n          }\r\n        })\r\n  }\r\n}\r\n\r\nconst useCheckFile = () => {\r\n  const dispatch = useDispatch();\r\n  const data = useSelector(state => state.data);\r\n  return (val, id) => {\r\n    if (id) {\r\n      data.forEach(item => item.id === id ? item.checked = val : '');\r\n    } else {\r\n      data.forEach(item => item.checked = val);\r\n    }\r\n    dispatch({\r\n      type: 'COMPLETE',\r\n      data\r\n    })\r\n  }\r\n}\r\n\r\nconst useCheckAll = () => {\r\n  const dispatch = useDispatch();\r\n  const data = useSelector(state => state.data);\r\n  return (val, pid) => {\r\n    data.forEach(item => item.pid === pid ? item.checked = val : '');\r\n    dispatch({\r\n      type: 'COMPLETE',\r\n      data\r\n    })\r\n  }\r\n}\r\n\r\nconst useCurrent = () => {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const data = useSelector(state => state.data);\r\n  return (id) => {\r\n    data.forEach(item => item.checked = false);\r\n    dispatch({\r\n      type: 'COMPLETE',\r\n      data\r\n    })\r\n    const url = id ? `/?d=${id.slice(-8)}` : '/';\r\n    history.push(url);\r\n  }\r\n}\r\n\r\nconst useCheckPassword = () => {\r\n  const dispatch = useDispatch();\r\n  return async (id, value) => {\r\n    let ret = true;\r\n    try {\r\n      const {status} = await http.post('/password', {id, value});\r\n      let pwd = JSON.parse(sessionStorage.getItem('panPwd')) || [];\r\n      if(status === 200)  pwd.push(id);\r\n      sessionStorage.setItem('panPwd', JSON.stringify(pwd));\r\n    } catch (error) {\r\n      ret = false;\r\n    }\r\n    dispatch({type: \"LOADED\"})\r\n    return ret;\r\n  }\r\n}\r\n\r\nexport {\r\n  useSetFile,\r\n  useCreateFolder,\r\n  useDeleteItem,\r\n  useMoveItem,\r\n  useCheckFile,\r\n  useCheckAll,\r\n  useGetMessage,\r\n  useCurrent,\r\n  useGetContent,\r\n  useGetUploadScript,\r\n  useCustomUpload,\r\n  useDownloadFile,\r\n  useCheckPassword\r\n}\r\n","import React from \"react\";\r\n\r\nfunction Container(props){\r\n  return <div className='container'>\r\n    {props.children}\r\n  </div>\r\n}\r\n\r\nexport default Container;","import React, {useEffect} from \"react\";\r\nimport {Modal, Input, Upload, Breadcrumb, Tree} from 'antd';\r\nimport {useSelector} from \"react-redux\";\r\nimport {FolderOpenOutlined, HomeOutlined, InboxOutlined} from '@ant-design/icons';\r\nimport {useCurrent, useCustomUpload, useGetUploadScript} from \"../../store/action\";\r\nimport {useGetCurrent, useGetMenu, useSetMoveData, useGetParents, useGetQuery, useShowMessage} from \"../../hooks\";\r\n\r\nconst {Dragger} = Upload;\r\nconst {DirectoryTree} = Tree;\r\n\r\nfunction ShowModal(props) {\r\n  const {footer, modal, modalType, moveData: {openData}} = useSelector(state => state);\r\n  const {InputRef, handleOk, handleCancel} = props;\r\n  const getUploadScript = useGetUploadScript();\r\n  const customUpload = useCustomUpload();\r\n  const current = useCurrent()\r\n  const parents = useGetParents();\r\n  const {d} = useGetQuery();\r\n  const {id = 'root', name} = useGetCurrent(d);\r\n  const showMessage = useShowMessage();\r\n  const {menuData} = useGetMenu();\r\n  const setMoveData = useSetMoveData();\r\n\r\n  let uploadUrl = '';\r\n\r\n  const showFooter = {};\r\n  if (!footer) showFooter.footer = null;\r\n\r\n  const options = {\r\n    name: 'file',\r\n    multiple: true,\r\n    beforeUpload: async (file) => {\r\n      const {data, status} = await getUploadScript(id, file);\r\n      if (status === 200) {\r\n        uploadUrl = data;\r\n      } else {\r\n        showMessage(data, false);\r\n      }\r\n    },\r\n    customRequest: async (\r\n      {\r\n        action,\r\n        data,\r\n        file,\r\n        filename,\r\n        headers,\r\n        onError,\r\n        onProgress,\r\n        onSuccess,\r\n        withCredentials,\r\n      }) => {\r\n      customUpload(uploadUrl, file, onProgress, onSuccess);\r\n    }\r\n  };\r\n\r\n  const onExpand = (keys, {node: {key}}) => {\r\n    setMoveData(key);\r\n  }\r\n\r\n  return <Modal\r\n    {...modal}\r\n    onOk={handleOk}\r\n    onCancel={handleCancel}\r\n    destroyOnClose={true}\r\n    maskClosable={true}\r\n  >\r\n    <Breadcrumb style={{padding: '12px'}}>\r\n      <Breadcrumb.Item key={'first'}>\r\n        <span style={{fontWeight: 600, color: '#000000D9'}}>当前目录：</span>\r\n      </Breadcrumb.Item>\r\n      <Breadcrumb.Item key={'first'}>\r\n        <HomeOutlined onClick={() => current(0)}/>\r\n      </Breadcrumb.Item>\r\n      {\r\n        parents.reverse().map(({id, name}) =>\r\n          <Breadcrumb.Item style={{cursor: 'pointer'}} key={id} onClick={() => current(id)}>\r\n            <FolderOpenOutlined style={{paddingRight: '5px'}}/>\r\n            {name}\r\n          </Breadcrumb.Item>\r\n        )\r\n      }\r\n      <Breadcrumb.Item key={'last'}>\r\n        <FolderOpenOutlined style={{marginRight: '5px'}}/>{name}\r\n      </Breadcrumb.Item>\r\n      <Breadcrumb.Item key={'hide'}>&nbsp;</Breadcrumb.Item>\r\n    </Breadcrumb>\r\n\r\n    {modalType === 'create' && <Input ref={InputRef}/>}\r\n    {modalType === 'upload' && <Dragger{...options}>\r\n      <p className=\"ant-upload-drag-icon\">\r\n        <InboxOutlined/>\r\n      </p>\r\n      <p className=\"ant-upload-text\">Click or drag file to this area to upload</p>\r\n      <p className=\"ant-upload-hint\">\r\n        Support for a single or bulk upload. Strictly prohibit from uploading company data or other\r\n        band files\r\n      </p>\r\n    </Dragger>}\r\n    {modalType === 'move' && <DirectoryTree\r\n        expandedKeys={openData}\r\n        onSelect={onExpand}\r\n        onExpand={onExpand}\r\n        treeData={menuData}\r\n    />}\r\n  </Modal>\r\n}\r\n\r\nexport default ShowModal;","import React, {useRef} from 'react';\r\nimport {Layout, Button, Row, Col, Modal} from \"antd\";\r\nimport Container from \"./container\";\r\nimport logo from '../../img/logo.png';\r\nimport ShowModal from \"../modal/modal\";\r\nimport {useCreateFolder, useDeleteItem, useMoveItem} from \"../../store/action\";\r\nimport {ExclamationCircleOutlined} from \"@ant-design/icons\";\r\nimport {\r\n  useCheckChecked,\r\n  useGetCurrent,\r\n  useGetQuery,\r\n  useHideModal,\r\n  useShowMessage,\r\n  useShowModalCreate,\r\n  useShowModalUpload,\r\n  useShowModalMove\r\n} from \"../../hooks\";\r\nimport {useSelector} from \"react-redux\";\r\n\r\nconst {Header} = Layout;\r\nconst {confirm} = Modal;\r\n\r\nfunction HeaderNav() {\r\n  const deleteItem = useDeleteItem();\r\n  const moveItem = useMoveItem();\r\n  const createFolder = useCreateFolder();\r\n  const showModalUpload = useShowModalUpload();\r\n  const showModalCreate = useShowModalCreate();\r\n  const showModalMove = useShowModalMove();\r\n  const hideModal = useHideModal();\r\n  const checkChecked = useCheckChecked();\r\n  const modalType = useSelector(state => state.modalType);\r\n\r\n  const handleOk = () => {\r\n    if(modalType === 'create'){\r\n      const {state: {value}} = InputRef.current;\r\n      createFolder(value);\r\n    }else if(modalType === 'move'){\r\n      moveItem();\r\n    }\r\n  }\r\n\r\n  const InputRef = useRef();\r\n  const handleCancel = () => {\r\n    hideModal();\r\n  }\r\n\r\n  const handleDelete = (resolve, reject) => {\r\n    deleteItem(resolve, reject);\r\n  }\r\n\r\n  const showMoveConfirm = () => {\r\n    checkChecked() && showModalMove();\r\n  }\r\n\r\n  const showDeleteConfirm = () => {\r\n    checkChecked() && confirm({\r\n      title: '确定要删除选中的文件或文件夹?',\r\n      icon: <ExclamationCircleOutlined/>,\r\n      okText: '删除',\r\n      okType: 'danger',\r\n      cancelText: '取消',\r\n      onOk() {\r\n        return new Promise((resolve, reject) => {\r\n          handleDelete(resolve, reject)\r\n        }).catch(() => console.log('出错!'))\r\n      }\r\n    });\r\n  }\r\n\r\n  return <Header theme=\"light\" style={{position: \"fixed\", zIndex: 99, width: '100%'}}>\r\n    <Container>\r\n      <Row>\r\n        <Col span={4}>\r\n          <img className='logo' src={logo} title='九度云盘' alt='九度云盘'/>\r\n        </Col>\r\n        <Col span={12}/>\r\n        <Col span={8} className='btn-group'>\r\n          <Button onClick={showDeleteConfirm} type=\"text\">删除</Button>\r\n          <Button type=\"text\" onClick={showMoveConfirm}>移动到</Button>\r\n          <Button type=\"text\" onClick={showModalCreate}>新建文件夹</Button>\r\n          <Button type=\"text\" onClick={showModalUpload}>上传文件</Button>\r\n          <ShowModal\r\n            InputRef={InputRef}\r\n            handleOk={handleOk}\r\n            handleCancel={handleCancel}\r\n          />\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n\r\n    <nav className=\"top-nav\">\r\n    </nav>\r\n  </Header>\r\n}\r\n\r\nexport default HeaderNav;\r\n","import React from 'react';\r\nimport {useCurrent} from \"../../store/action\";\r\nimport {useGetCurrent, useGetMenu, useGetQuery} from \"../../hooks\";\r\nimport {Layout, Tree} from \"antd\";\r\n\r\nconst {DirectoryTree} = Tree;\r\nconst {Sider} = Layout;\r\n\r\nfunction SiderMenu() {\r\n  const {d} = useGetQuery();\r\n  const {id: key='root'} = useGetCurrent(d);\r\n  const current = useCurrent();\r\n  const {openData, menuData} = useGetMenu();\r\n\r\n  const onExpand = (keys, {node: {key}}) => {\r\n    key = key==='root' ? '' : key;\r\n    current(key);\r\n  }\r\n\r\n  return (\r\n    <Sider theme=\"light\" width={300} className=\"site-layout-background\">\r\n      <DirectoryTree\r\n        expandedKeys={openData}\r\n        selectedKeys={[key]}\r\n        onSelect={onExpand}\r\n        onExpand={onExpand}\r\n        treeData={menuData}\r\n      />\r\n    </Sider>\r\n  )\r\n}\r\n\r\nexport default SiderMenu;","import React, {Fragment} from \"react\";\r\nimport {useGetCurrent, useGetFiles, useGetParents, useGetQuery} from \"../../hooks\";\r\nimport {useCheckAll, useCurrent} from \"../../store/action\";\r\nimport {Breadcrumb, Checkbox} from \"antd\";\r\nimport { HomeOutlined, FolderOpenOutlined, FileOutlined } from '@ant-design/icons';\r\n\r\nfunction BreadMenu() {\r\n  const checkAll = useCheckAll()\r\n  const current = useCurrent()\r\n  const parents = useGetParents();\r\n  const files = useGetFiles();\r\n  const {d, f} = useGetQuery();\r\n  const {id: mid=0, name: menuName} = useGetCurrent(d);\r\n  const {id: fid, name: fileName} = useGetCurrent(f);\r\n  if(fid && mid)  parents.unshift({id: mid, name: menuName});\r\n  const name = fid ? fileName : menuName;\r\n  const checked = !!(files.length && files.every(item=>item.checked));\r\n\r\n  return (<Fragment>\r\n\r\n    <Breadcrumb style={{padding: '12px'}}>\r\n      <Breadcrumb.Item key={'checkAll'}>\r\n        <Checkbox checked={checked} onClick={e=>e.stopPropagation()}\r\n                  onChange={({target: {checked}})=>{\r\n                    checkAll(checked, mid);\r\n                  }}>全选</Checkbox>\r\n      </Breadcrumb.Item>\r\n      <Breadcrumb.Item key={'first'}>\r\n        <HomeOutlined onClick={() => current(0)} />\r\n      </Breadcrumb.Item>\r\n      {\r\n        parents.reverse().map(({id, name}) =>\r\n          <Breadcrumb.Item style={{cursor: 'pointer'}} key={id} onClick={() => current(id)}>\r\n            <FolderOpenOutlined style={{paddingRight: '5px'}} />\r\n            {name}\r\n          </Breadcrumb.Item>\r\n        )\r\n      }\r\n      { name ? (<Breadcrumb.Item key={'last'}>{ fid ? <FileOutlined style={{marginRight: '5px'}} /> : <FolderOpenOutlined style={{marginRight: '5px'}}/>}{name}</Breadcrumb.Item>) : '' }\r\n    </Breadcrumb>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nexport default BreadMenu;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React, {Fragment} from \"react\";\r\nimport ffg from \"../../img/lg-fg.svg\";\r\nimport fileIcon from \"../../img/zip.svg\";\r\nimport audio from \"../../img/audio.svg\";\r\n\r\nfunction ItemIcon(props) {\r\n  const {folder, children, thumbnail, filetype} = props;\r\n  const thumb = filetype==='audio' ? audio : (thumbnail ? thumbnail : fileIcon);\r\n  const zip = filetype==='audio' ? false : !thumbnail;\r\n  return <Fragment>\r\n    {folder ? <div className={'folder-icon'}>\r\n          {children ? <div className={'folder-icon-ct'}/> : ''}\r\n          <div className={'folder-icon-fg'}>\r\n            <img title={''} alt={''} src={ffg}/>\r\n          </div>\r\n        </div> :\r\n        <div className={'file-icon'} style={{background: `url(\"${thumb}\") no-repeat center ${zip ? '' : 'top'} / 100%`}}>\r\n          <div className={'file-icon-ph'}>\r\n            <img title={''} alt={''} src={ffg}/>\r\n          </div>\r\n        </div>\r\n    }\r\n  </Fragment>\r\n}\r\n\r\nexport default ItemIcon;","import React, {useRef} from \"react\";\r\nimport {useCheckFile, useCurrent, useDeleteItem, useDownloadFile, useSetFile} from \"../../store/action\";\r\nimport {Button, Card, List, Checkbox, Modal} from \"antd\";\r\nimport {getFileType} from \"../../hooks/ext\";\r\nimport {\r\n  DownloadOutlined,\r\n  FileTextOutlined,\r\n  FolderOpenOutlined,\r\n  DeleteOutlined,\r\n  ExclamationCircleOutlined\r\n} from \"@ant-design/icons\";\r\nimport {useSelector} from \"react-redux\";\r\nimport ItemIcon from \"./ItemIcon\";\r\n\r\nconst {confirm} = Modal;\r\n\r\nfunction File(props) {\r\n  const loading = useSelector(state=>state.loading);\r\n  const deleteItem = useDeleteItem();\r\n  const download = useDownloadFile();\r\n  const current = useCurrent();\r\n  const setFile = useSetFile();\r\n  const checkFile = useCheckFile();\r\n  const {file: {id, name, folder, checked, children, thumbnail}} = props;\r\n  const filetype = getFileType(name);\r\n\r\n  const show = () => {\r\n    if (folder) return false;\r\n    return getFileType(name) === 'doc';\r\n  }\r\n  const downloadRef = useRef();\r\n  const deleteRef = useRef();\r\n\r\n  const handleClick = () => {\r\n    if (folder) {\r\n      current(id);\r\n    } else {\r\n      !show() && setFile(id);\r\n    }\r\n  }\r\n\r\n  const handleMouseEnter = () => {\r\n    const {current: download} = downloadRef;\r\n    const {current: del} = deleteRef;\r\n    if (del) del.style.display = 'block';\r\n    if (download) download.style.display = 'block';\r\n  }\r\n  const handleMouseLeave = () => {\r\n    const {current: download} = downloadRef;\r\n    const {current: del} = deleteRef;\r\n    if (del) del.style.display = 'none';\r\n    if (download) download.style.display = 'none';\r\n  }\r\n  const handleDownload = (e) => {\r\n    e.stopPropagation();\r\n    download(id);\r\n  }\r\n  const handleDelete = (resolve, reject) => {\r\n    deleteItem(resolve, reject, id);\r\n  }\r\n  const checkItem = ({target: {checked}}) => {\r\n    checkFile(checked, id);\r\n  }\r\n\r\n  const showDeleteConfirm = (e) => {\r\n    e.stopPropagation();\r\n    confirm({\r\n      title: '确定要删除当前文件' + (folder ? '夹' : '') + '?',\r\n      icon: <ExclamationCircleOutlined/>,\r\n      okText: '删除',\r\n      okType: 'danger',\r\n      cancelText: '取消',\r\n      onOk() {\r\n        return new Promise((resolve, reject) => {\r\n          handleDelete(resolve, reject)\r\n        }).catch(() => console.log('出错!'))\r\n      }\r\n    });\r\n  }\r\n\r\n  return <List.Item className='list-item'>\r\n    <Card\r\n      className={'folder-item'}\r\n      onClick={handleClick}\r\n      onMouseEnter={handleMouseEnter}\r\n      onMouseLeave={handleMouseLeave}\r\n    >\r\n      {/*{folder ?\r\n        <FolderOpenOutlined className={'file-icon'}/> :\r\n        <FileTextOutlined className={'file-icon'}/>}*/}\r\n      <ItemIcon {...{folder, children, thumbnail, filetype}}/>\r\n\r\n      <div className={'ant-card-body-title'}>{name}</div>\r\n      <Button\r\n        danger\r\n        className={'delete-btn'}\r\n        ref={deleteRef}\r\n        type=\"primary\"\r\n        size=\"small\"\r\n        icon={<DeleteOutlined/>}\r\n        onClick={showDeleteConfirm}\r\n      >删除</Button>\r\n      {show() &&\r\n      <Button\r\n        className={'download-btn'}\r\n        ref={downloadRef}\r\n        type=\"primary\"\r\n        size=\"small\"\r\n        // loading={loading}\r\n        icon={<DownloadOutlined/>}\r\n        onClick={handleDownload}\r\n      >下载{loading ? '中' : ''}</Button>}\r\n      <Checkbox\r\n        className={'file-check'}\r\n        checked={checked}\r\n        onClick={e => e.stopPropagation()}\r\n        onChange={checkItem}/>\r\n    </Card>\r\n  </List.Item>\r\n}\r\n\r\nexport default File;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React, {Fragment, useEffect, useRef} from \"react\";\r\nimport {useGetCurrent, useGetFiles, useGetQuery, usePassword, useSetPassword, useShowMessage} from \"../../hooks\";\r\nimport {Button, List, Input} from \"antd\";\r\nimport File from \"../../components/item/file\";\r\nimport {useCheckPassword} from \"../../store/action\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\n\r\nfunction Main() {\r\n  const files = useGetFiles();\r\n  const inputRef = useRef();\r\n  const {file = {}, parent = {}, password} = usePassword();\r\n  const checkPassword = useCheckPassword();\r\n  const showMessage = useShowMessage();\r\n  const {loading} = useSelector(state => state);\r\n  const dispatch = useDispatch();\r\n\r\n  const {name} = parent;\r\n  const {id} = file;\r\n  const submit = async () => {\r\n    const {state: {value}} = inputRef.current;\r\n    console.log(inputRef.current);\r\n    if (!value) {\r\n      showMessage('请输入密码后查看', false);\r\n      inputRef.current.focus();\r\n      return false;\r\n    }\r\n    dispatch({type: 'LOADING'});\r\n    const ret = await checkPassword(id, value);\r\n    if (!ret) {\r\n      showMessage('密码错误', false);\r\n      inputRef.current.focus();\r\n      return false;\r\n    }\r\n    // window.location.reload();\r\n  }\r\n\r\n  return <Fragment>\r\n    {password ?\r\n        <div className='password-view'>\r\n          <div className='password-desc'>当前路径中<span className='pathname'>{name}</span>有密码保护</div>\r\n          <Input.Password className='password-input' ref={inputRef} allowClear={true} placeholder=\"请输入密码\"/>\r\n          <Button type=\"primary\" onClick={submit} loading={loading}>查看</Button>\r\n        </div> :\r\n        <List\r\n            grid={{\r\n              gutter: 16,\r\n              xs: 1,\r\n              sm: 2,\r\n              md: 3,\r\n              lg: 4,\r\n              xl: 5,\r\n              xxl: 6,\r\n            }}\r\n            dataSource={files}\r\n            renderItem={(file) => <File file={file}/>}\r\n        />}\r\n  </Fragment>;\r\n}\r\n\r\nexport default Main;","import React, {Fragment} from \"react\";\r\nimport SiderMenu from \"../../components/menu/menu\";\r\nimport {Layout} from \"antd\";\r\nimport BreadMenu from \"../../components/bread/bread\";\r\nimport Main from \"./main\";\r\n\r\nconst {Content} = Layout;\r\n\r\nfunction IndexPage() {\r\n  return <Fragment>\r\n    <SiderMenu/>\r\n    <Layout style={{padding: '0 24px 24px'}}>\r\n      <BreadMenu/>\r\n      <Content className=\"site-layout-background main-container\">\r\n        <Main />\r\n      </Content>\r\n    </Layout>\r\n  </Fragment>\r\n}\r\n\r\nexport default IndexPage;","import React, {useEffect} from \"react\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {useGetContent} from \"../../store/action\";\r\nimport Prism from 'prismjs';\r\nimport 'prismjs/components/prism-markup-templating';\r\nimport 'prismjs/plugins/autoloader/prism-autoloader';\r\nimport {getFileExt} from \"../../hooks/ext\";\r\nimport 'prismjs/themes/prism-tomorrow.css';\r\nimport 'prismjs/components/prism-php.min';\r\nimport 'prismjs/components/prism-javascript.min';\r\nimport 'prismjs/components/prism-css.min';\r\nimport 'prismjs/components/prism-textile.min';\r\nimport {useGetCurrent, useGetQuery} from \"../../hooks\";\r\n\r\nfunction Code() {\r\n  const {f} = useGetQuery();\r\n  const {loading, content} = useSelector(state => state);\r\n  const getContent = useGetContent();\r\n  const {id, name, pid} = useGetCurrent(f);\r\n\r\n  useEffect(() => {\r\n    if(id)  getContent(id, pid);\r\n  }, [id, pid]);\r\n\r\n  const language = getFileExt(name);\r\n  const html = content&&language!=='txt' ? Prism.highlight(content, Prism.languages[language], language) : content;\r\n\r\n  return (\r\n    <pre className={`code-content language-${language}`}>\r\n      {\r\n        loading ? '加载中，请稍后' : <code\r\n          className={`language-${language}`}\r\n          dangerouslySetInnerHTML={{__html: html}}\r\n        />\r\n      }\r\n    </pre>\r\n  )\r\n}\r\n\r\nexport default Code;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React, {Fragment} from \"react\";\r\nimport SiderMenu from \"../../components/menu/menu\";\r\nimport {Layout} from \"antd\";\r\nimport BreadMenu from \"../../components/bread/bread\";\r\nimport Code from \"./code\";\r\n\r\nconst {Content} = Layout;\r\n\r\nfunction CodePage() {\r\n  return <Fragment>\r\n    <SiderMenu/>\r\n    <Layout style={{padding: '0 24px 24px'}}>\r\n      <BreadMenu/>\r\n      <Content className=\"site-layout-background\">\r\n        <Code />\r\n      </Content>\r\n    </Layout>\r\n  </Fragment>\r\n}\r\n\r\nexport default CodePage;","import React, {useEffect} from \"react\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {useGetContent} from \"../../store/action\";\r\nimport {getFileType} from \"../../hooks/ext\";\r\nimport {useGetCurrent, useGetQuery} from \"../../hooks\";\r\n\r\nfunction Video() {\r\n  const {f} = useGetQuery();\r\n  const getContent = useGetContent();\r\n  const {content} = useSelector(state => state);\r\n  const {id, name, pid} = useGetCurrent(f);\r\n  const type = getFileType(name);\r\n  useEffect(() => {\r\n    if(id)  getContent(id, pid);\r\n  }, [id, pid]);\r\n\r\n  return <div id={'video_box'}>\r\n    {\r\n      type === 'video' ?\r\n        <video id={'video'} controls autoPlay src={content}/> :\r\n        <audio id={'audio'} controls autoPlay src={content}/>\r\n    }\r\n\r\n  </div>\r\n}\r\n\r\nexport default Video;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React, {Fragment} from \"react\";\r\nimport SiderMenu from \"../../components/menu/menu\";\r\nimport {Layout} from \"antd\";\r\nimport BreadMenu from \"../../components/bread/bread\";\r\nimport Video from \"./video\";\r\n\r\nconst {Content} = Layout;\r\n\r\nfunction MediaPage() {\r\n  return <Fragment>\r\n    <SiderMenu/>\r\n    <Layout style={{padding: '0 24px 24px'}}>\r\n      <BreadMenu/>\r\n      <Content className=\"site-layout-background\">\r\n        <Video />\r\n      </Content>\r\n    </Layout>\r\n  </Fragment>\r\n}\r\n\r\nexport default MediaPage;","import React, {useEffect} from \"react\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {useGetContent} from \"../../store/action\";\r\nimport marked from \"marked\";\r\nimport hljs from 'highlight.js';\r\nimport 'highlight.js/styles/dark.css';\r\nimport {useGetCurrent, useGetQuery} from \"../../hooks\";\r\n\r\nconst options = {\r\n  renderer: new marked.Renderer(),\r\n  highlight: function (code, language) {\r\n    const validLanguage = hljs.getLanguage(language) ? language : 'plaintext';\r\n    return hljs.highlight(validLanguage, code).value;\r\n  },\r\n  pedantic: false,\r\n  gfm: true,\r\n  breaks: false,\r\n  sanitize: false,\r\n  smartLists: true,\r\n  smartypants: false,\r\n  xhtml: false\r\n}\r\nmarked.setOptions(options);\r\n\r\nfunction Markdown() {\r\n  const {f} = useGetQuery();\r\n  const {content} = useSelector(state => state);\r\n  const getContent = useGetContent();\r\n  const {id} = useGetCurrent(f);\r\n\r\n  useEffect(() => {\r\n    if(id)  getContent(id);\r\n  }, [id]);\r\n\r\n  const html = content ? marked(content) : '加载中，请稍后';\r\n\r\n  return <div className={'md_container'} dangerouslySetInnerHTML={{__html: html}}/>\r\n}\r\n\r\nexport default Markdown;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React, {Fragment} from \"react\";\r\nimport SiderMenu from \"../../components/menu/menu\";\r\nimport {Layout} from \"antd\";\r\nimport BreadMenu from \"../../components/bread/bread\";\r\nimport Markdown from \"./md\";\r\n\r\nconst {Content} = Layout;\r\n\r\nfunction MarkdownPage() {\r\n  return <Fragment>\r\n    <SiderMenu/>\r\n    <Layout style={{padding: '0 24px 24px'}}>\r\n      <BreadMenu/>\r\n      <Content className=\"site-layout-background\">\r\n        <Markdown />\r\n      </Content>\r\n    </Layout>\r\n  </Fragment>\r\n}\r\n\r\nexport default MarkdownPage;","import React from \"react\";\r\n\r\nfunction NotFound() {\r\n  return <div>404页面</div>\r\n}\r\n\r\nexport default NotFound;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React, {Fragment} from \"react\";\r\nimport SiderMenu from \"../../components/menu/menu\";\r\nimport {Layout} from \"antd\";\r\nimport BreadMenu from \"../../components/bread/bread\";\r\nimport NotFound from \"./404\";\r\n\r\nconst {Content} = Layout;\r\n\r\nfunction CodePage() {\r\n  console.log('CodePage');\r\n  return <Fragment>\r\n    <SiderMenu/>\r\n    <Layout style={{padding: '0 24px 24px'}}>\r\n      <BreadMenu/>\r\n      <Content className=\"site-layout-background\">\r\n        <NotFound />\r\n      </Content>\r\n    </Layout>\r\n  </Fragment>\r\n}\r\n\r\nexport default CodePage;","import {Layout} from 'antd';\r\nimport React, {useEffect} from \"react\";\r\nimport {useGetMessage} from \"./store/action\";\r\nimport {Route, Switch} from \"react-router-dom\";\r\nimport 'antd/dist/antd.css';\r\nimport HeaderNav from \"./components/header/header\";\r\nimport IndexPage from \"./views/index/IndexPage\";\r\nimport CodePage from \"./views/content/CodePage\";\r\nimport MediaPage from \"./views/media/MediaPage\";\r\nimport MarkdownPage from \"./views/content/MarkdownPage\";\r\nimport Page404 from \"./views/404/Page404\";\r\n\r\nfunction App() {\r\n  const getMessage = useGetMessage();\r\n  useEffect(() => {\r\n    getMessage();\r\n  }, [getMessage])\r\n  return <Layout>\r\n    <HeaderNav />\r\n    <Layout>\r\n      <Switch>\r\n        <Route path={'/'} exact render={() => <IndexPage/>}/>\r\n        <Route path={'/code'} exact render={() => <CodePage/>}/>\r\n        <Route path={'/video'} exact render={() => <MediaPage/>}/>\r\n        <Route path={'/audio'} exact render={() => <MediaPage/>}/>\r\n        <Route path={'/md'} exact render={() => <MarkdownPage/>}/>\r\n        <Route path={''} render={() => <Page404/>}/>\r\n      </Switch>\r\n    </Layout>\r\n  </Layout>\r\n}\r\n\r\nexport default App;","import { createStore } from \"redux\";\r\n\r\nconst reducer = (state = {\r\n  data: [],\r\n  loading: false,\r\n  confirm: false,\r\n  visible: false,\r\n  footer: false,\r\n  upload: '',\r\n  modal: {},\r\n  modalType: '',\r\n  moveData: {id:'', openData: ['root']},\r\n  password: {}\r\n}, action) => {\r\n  switch (action.type){\r\n    case 'LOADING':\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n      }\r\n    case 'LOADED':\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n      }\r\n    case 'COMPLETE':\r\n      return {\r\n        ...state,\r\n        data: action.data,\r\n        loading: false,\r\n      }\r\n    case 'CONTENT':\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        content: action.data\r\n      }\r\n    case 'MODAL_VISIBLE':\r\n      return {\r\n        ...state,\r\n        visible: action.visible,\r\n        footer: action.footer\r\n      }\r\n    case 'SET_MODAL':\r\n      return {\r\n        ...state,\r\n        modal: action.modal,\r\n        modalType: action.modalType\r\n      }\r\n    case 'CONFIRM':\r\n      return {\r\n        ...state,\r\n        confirm: action.confirm\r\n      }\r\n    case 'MESSAGE':\r\n      return {\r\n        ...state,\r\n        msg: action.msg\r\n      }\r\n    case 'UPLOAD':\r\n      return {\r\n        ...state,\r\n        upload: action.upload\r\n      }\r\n    case 'MOVE_DATA':\r\n      return {\r\n        ...state,\r\n        moveData: action.data\r\n      }\r\n    case 'SET_PASSWORD':\r\n      return {\r\n        ...state,\r\n        password: action.data\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst store = createStore(reducer);\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport {Provider} from \"react-redux\";\r\nimport {BrowserRouter} from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport store from \"./store\";\r\nimport \"./css/font.css\";\r\nimport \"./css/index.css\";\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <Provider store={store}>\r\n      <App/>\r\n    </Provider>\r\n  </BrowserRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}